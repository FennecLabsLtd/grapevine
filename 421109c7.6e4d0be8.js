(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{120:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return m}));var r=n(0),o=n.n(r);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var p=o.a.createContext({}),l=function(e){var t=o.a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},d=function(e){var t=l(e.components);return o.a.createElement(p.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},b=o.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,i=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),d=l(n),b=r,m=d["".concat(i,".").concat(b)]||d[b]||u[b]||a;return n?o.a.createElement(m,s(s({ref:t},p),{},{components:n})):o.a.createElement(m,s({ref:t},p))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=b;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var p=2;p<a;p++)i[p]=n[p];return o.a.createElement.apply(null,i)}return o.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"},80:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return s})),n.d(t,"toc",(function(){return c})),n.d(t,"default",(function(){return l}));var r=n(3),o=n(7),a=(n(0),n(120)),i={id:"overview",title:"Overview",slug:"/"},s={unversionedId:"overview",id:"overview",isDocsHomePage:!1,title:"Overview",description:"Grapevine is REST/HTTP server that listens for incoming requests and routes them to specific methods in your code. It can also serve static assets. While it is flexible in how it can be used, it is not intended to be a replacement for IIS. Rather, it's intended use is to be an embedded server in an application whose primary purpose is not a web server. You can embedd it in a Windows Service, a desktop application or a console application.",source:"@site/docs\\gv-overview.md",slug:"/",permalink:"/grapevine/docs/",editUrl:"https://github.com/scottoffen/grapevine-docs/edit/master/docs/gv-overview.md",version:"current",sidebar:"someSidebar",next:{title:"Routes",permalink:"/grapevine/docs/routes"}},c=[{value:"Inspiration",id:"inspiration",children:[]},{value:"Getting Started",id:"getting-started",children:[]}],p={toc:c};function l(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(a.b)("wrapper",Object(r.a)({},p,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("p",null,"Grapevine is REST/HTTP server that listens for incoming requests and routes them to specific methods in your code. It can also serve static assets. While it is flexible in how it can be used, it is not intended to be a replacement for IIS. Rather, it's intended use is to be an embedded server in an application whose primary purpose is not a web server. You can embedd it in a Windows Service, a desktop application or a console application."),Object(a.b)("h2",{id:"inspiration"},"Inspiration"),Object(a.b)("p",null,"Grapevine is modeled after my experience using the popular Node.js library ",Object(a.b)("a",Object(r.a)({parentName:"p"},{href:"http://expressjs.com/"}),"Express"),", which was itself inspired by the Ruby ",Object(a.b)("a",Object(r.a)({parentName:"p"},{href:"http://sinatrarb.com/"}),"Sinatra")," library. When an incoming request is received, the request and response objects (collectively part of the ",Object(a.b)("inlineCode",{parentName:"p"},"IHttpContext")," object) gets routed to all matching routes until one of them sends a response - after which no more routes are invoked. If no matching routes are found, or if no route responds, then a ",Object(a.b)("inlineCode",{parentName:"p"},"Not Implemented")," response is sent."),Object(a.b)("h2",{id:"getting-started"},"Getting Started"),Object(a.b)("p",null,"Grapevine is easy to get started with."),Object(a.b)("p",null,"Create a simple route. This is the code that you want to run when a request comes in using the specificed HTTP verb and path. ",Object(a.b)("strong",{parentName:"p"},"Route methods must be ",Object(a.b)("a",Object(r.a)({parentName:"strong"},{href:"https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/concepts/async/"}),"asynchronous"),"!")),Object(a.b)("p",null,"The only argument to your method is an ",Object(a.b)("inlineCode",{parentName:"p"},"IHttpContext")," object. This contains (among other things) the request and response objects. Since at least one of our route methods should respond to the request, we'll do that in this method."),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-csharp"}),'[RestResource]\npublic class MyResource\n{\n    [RestRoute("Get", "/api/test")]\n    public async Task Test(IHttpContext context)\n    {\n        await context.Response.SendResponseAsync("Successfully hit the test route!");\n    }\n}\n')),Object(a.b)("p",null,"Next, create your first server using provided defaults with the ",Object(a.b)("inlineCode",{parentName:"p"},"RestServerBuilder")," class and start your server up!"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-csharp"}),'using (var server = RestServerBuilder.UseDefaults().Build())\n{\n    server.Start();\n\n    Console.WriteLine("Press enter to stop the server");\n    Console.ReadLine();\n}\n')),Object(a.b)("p",null,"Open your prefered browser and go to ",Object(a.b)("inlineCode",{parentName:"p"},"http://localhost:1234/api/test"),". You should see the following output in your browser:"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),"Successfully hit the test route!\n")),Object(a.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(a.b)("div",Object(r.a)({parentName:"div"},{className:"admonition-heading"}),Object(a.b)("h5",{parentName:"div"},Object(a.b)("span",Object(r.a)({parentName:"h5"},{className:"admonition-icon"}),Object(a.b)("svg",Object(r.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(a.b)("path",Object(r.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(a.b)("div",Object(r.a)({parentName:"div"},{className:"admonition-content"}),Object(a.b)("p",{parentName:"div"},"Grapevine use ",Object(a.b)("inlineCode",{parentName:"p"},"Microsoft.Extensions.DependencyInjection")," for dependency injection and ",Object(a.b)("inlineCode",{parentName:"p"},"Microsoft.Extensions.Logging")," for logging. The default ",Object(a.b)("inlineCode",{parentName:"p"},"RestServer")," implementation is a wrapper for the ubiquitous ",Object(a.b)("a",Object(r.a)({parentName:"p"},{href:"https://docs.microsoft.com/en-us/dotnet/api/system.net.httplistener?view=net-5.0"}),Object(a.b)("inlineCode",{parentName:"a"},"HttpListener"))," class, although it is possible to create an implementation that does not have this dependency."))))}l.isMDXComponent=!0}}]);