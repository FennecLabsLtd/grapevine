<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/grapevine/blog/rss.xml" title="Grapevine Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/grapevine/blog/atom.xml" title="Grapevine Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-NY1EMEGC7C","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script><title data-react-helmet="true">Grapevine 5.0 Beta 0 | Grapevine</title><meta data-react-helmet="true" property="og:title" content="Grapevine 5.0 Beta 0 | Grapevine"><meta data-react-helmet="true" name="description" content="The first beta version of Grapevine 5.0 was uploaded to NuGet.org today, December 25, 2020."><meta data-react-helmet="true" property="og:description" content="The first beta version of Grapevine 5.0 was uploaded to NuGet.org today, December 25, 2020."><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="default"><link data-react-helmet="true" rel="shortcut icon" href="/grapevine/img/favicon.ico"><link rel="stylesheet" href="/grapevine/styles.38194a08.css">
<link rel="preload" href="/grapevine/styles.f3520f75.js" as="script">
<link rel="preload" href="/grapevine/runtime~main.cb1c3d44.js" as="script">
<link rel="preload" href="/grapevine/main.42e31e95.js" as="script">
<link rel="preload" href="/grapevine/1.ebbf3297.js" as="script">
<link rel="preload" href="/grapevine/2.c83f2873.js" as="script">
<link rel="preload" href="/grapevine/3.3a4f6588.js" as="script">
<link rel="preload" href="/grapevine/ccc49370.d86402bb.js" as="script">
<link rel="preload" href="/grapevine/323e1239.250b9f94.js" as="script">
<link rel="preload" href="/grapevine/0fd4395c.d054d642.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/grapevine/"><img src="/grapevine/img/logo.png" alt="Grapevine Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/grapevine/img/logo.png" alt="Grapevine Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Grapevine</strong></a><a class="navbar__item navbar__link" href="/grapevine/docs/">Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/grapevine/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/scottoffen/grapevine" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/grapevine/"><img src="/grapevine/img/logo.png" alt="Grapevine Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/grapevine/img/logo.png" alt="Grapevine Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Grapevine</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/grapevine/docs/">Docs</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/grapevine/blog">Blog</a></li><li class="menu__list-item"><a href="https://github.com/scottoffen/grapevine" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper blog-wrapper"><div class="container margin-vert--lg"><div class="row"><div class="col col--2"><div class="sidebar_SWld thin-scrollbar"><h3 class="sidebarItemTitle_Km2m">Recent posts</h3><ul class="sidebarItemList_3UpA"><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/grapevine/blog/beta-1">Grapevine 5.0 Beta 1</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/grapevine/blog/docusaurus">Grapevine Docs</a></li><li class="sidebarItem_2T0D"><a aria-current="page" class="sidebarItemLink_v5H9 sidebarItemLinkActive_1anX" href="/grapevine/blog/beta-0">Grapevine 5.0 Beta 0</a></li></ul></div></div><main class="col col--8"><article><header><h1 class="margin-bottom--sm blogPostTitle_3-lP">Grapevine 5.0 Beta 0</h1><div class="margin-vert--md"><time datetime="2020-12-25T00:00:00.000Z" class="blogPostDate_Ta7i">December 25, 2020  Â· 3 min read</time></div><div class="avatar margin-vert--md"><a class="avatar__photo-link avatar__photo" href="https://scottoffen.github.io" target="_blank" rel="noreferrer noopener"><img src="https://avatars1.githubusercontent.com/u/3513626?v=4" alt="Scott Offen"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://scottoffen.github.io" target="_blank" rel="noreferrer noopener">Scott Offen</a></h4><small class="avatar__subtitle">Grapevine Creator</small></div></div></header><section class="markdown"><p>The first beta version of Grapevine 5.0 was uploaded to <a href="https://www.nuget.org/" target="_blank" rel="noopener noreferrer">NuGet.org</a> today, December 25, 2020.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>GitHub Issues are turned temporarily turned off for Grapevine 5.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="a-complete-rewrite"></a>A Complete Rewrite<a class="hash-link" href="#a-complete-rewrite" title="Direct link to heading">#</a></h2><p>A huge thank you to everyone who has downloaded and used Grapevine over the years, and especially those who have provided feedback and code to make the project better.</p><p>That said, Grapevine 5 is a complete rewrite from top to bottom. The primary goal has always been that it must be simple to implement, without compromising on functionality or performance. The new Grapevine 5 is async from the receipt of the request to the sending of the response, which makes it blazing fast. It has a cleaner and more flexible logging mechanism, and supports dependency injection in routes. It can be easily extended to meet specific needs, and you can even wholesale replace any part with your own implementation.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="things-to-know"></a>Things To Know<a class="hash-link" href="#things-to-know" title="Direct link to heading">#</a></h2><p>A new major version naturally brings with it breaking changes. In the case of Grapevine 5, it (as <a href="https://www.youtube.com/watch?v=-LrZ01A6Q_M" target="_blank" rel="noopener noreferrer">Jonathan Coulton</a> might say) breaks everything in the nicest way.</p><p>If you have used a previous version of Grapevine, here is a quick summary of some thing you should know going in, in no particular order.</p><ul><li>Target Frameworks: netstandard2.0, netstandard 2.1, and net5.0</li><li>Symbols package is also up on NuGet, for easier debugging during development</li><li>I&#x27;ve removed the Grapevine.Client, at least for now (recommend using <a href="https://docs.microsoft.com/en-us/dotnet/architecture/microservices/implement-resilient-applications/use-httpclientfactory-to-implement-resilient-http-requests" target="_blank" rel="noopener noreferrer"><code>IHttpClientFactory</code></a>)</li><li>The single URI restriction has been removed, so you can listen on multiple ports!</li><li>Everything you need in the library is now in the Grapevine namespace</li><li>Grapevine is async all the way through the stack</li><li><em>This</em> beta does not contain an <code>IContentFolder</code> (formerly <code>IPublicFolder</code>) implementation</li><li>There are built in extension for adding CORS (<code>IRestServer.UseCorsPolicy()</code>) and correlation ids (<code>IRestServer.UseCorrelationId()</code>)</li><li>Standards based dependency injection (using <code>Microsoft.Extensions.DependencyInjection</code>) and logging (using <code>Microsoft.Extensions.Logging</code>)</li><li><code>RestResource</code> attributed classes are no longer required to have parameterless constructor (see above)</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="code-sample"></a>Code Sample<a class="hash-link" href="#code-sample" title="Direct link to heading">#</a></h2><div class="admonition admonition-warning alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>warning</h5></div><div class="admonition-content"><p>The <code>RestServer.DeveloperConfiguration</code> extension method used on line 12 is only available in this beta. It will be replaced with more elegant solution for start up and configuration.</p></div></div><div class="mdxCodeBlock_1zKU"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_2eSY">Program.cs</div><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-csharp codeBlock_tuNs thin-scrollbar codeBlockWithTitle_1UkA"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">using System;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">using System.Linq;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">using Grapevine;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">namespace MyConsoleApp</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public class Program</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        public static void Main(string[] args)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            Console.WriteLine(&quot;Starting Grapevine Server&quot;);</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">            using (var server = RestServer.DeveloperConfiguration((services) =&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                // If your resources need dependencies injected, register those classes here</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            }, true))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                Console.WriteLine($&quot;Server will listen on {string.Join(&quot;, &quot;, server.Prefixes)}&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                server.Start();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                Console.WriteLine(&quot;Press any key to stop the sample server.&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                Console.ReadLine();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Of course, you&#x27;ll need some routes to go along with that...</p><div class="mdxCodeBlock_1zKU"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_2eSY">MyResource.cs</div><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-csharp codeBlock_tuNs thin-scrollbar codeBlockWithTitle_1UkA"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">using System.Threading.Tasks;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">using Grapevine;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">using Microsoft.Extensions.Logging;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">namespace MyConsoleApp</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    [RestResource]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public class MyResource</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        private readonly ILogger&lt;MyResource&gt; _logger;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        public MyResource(ILogger&lt;MyResource&gt; logger)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            _logger = logger;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        [RestRoute(&quot;Get&quot;, &quot;/hello&quot;, Name = &quot;Test Route&quot;, Description = &quot;Just a route to test stuff with.&quot;, Enabled = true)]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        public async Task HelloWorld(IHttpContext context)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            await context.Response.SendResponseAsync(&quot;Hello, world!&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        [RestRoute]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        public async Task CathcAll(IHttpContext context)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            _logger.LogTrace($&quot;{context.Request.HttpMethod} {context.Request.PathInfo} : Catch All Method&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            await context.Response.SendResponseAsync(HttpStatusCode.Ok);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/grapevine/blog/tags/5-0-0-beta-0">5.0.0-beta.0</a></div></footer></article><div><a href="https://github.com/scottoffen/grapevine-docs/edit/master/blog/blog/2020-12-25-beta-0.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="margin-vert--xl"><nav class="pagination-nav" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/grapevine/blog/docusaurus"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Â« Grapevine Docs</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></main><div class="col col--2"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#a-complete-rewrite" class="table-of-contents__link">A Complete Rewrite</a></li><li><a href="#things-to-know" class="table-of-contents__link">Things To Know</a></li><li><a href="#code-sample" class="table-of-contents__link">Code Sample</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/grapevine/docs/">Style Guide</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/grapevine" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/grapevine/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/scottoffen/grapevine" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2020 Scott Offen</div></div></div></footer></div>
<script src="/grapevine/styles.f3520f75.js"></script>
<script src="/grapevine/runtime~main.cb1c3d44.js"></script>
<script src="/grapevine/main.42e31e95.js"></script>
<script src="/grapevine/1.ebbf3297.js"></script>
<script src="/grapevine/2.c83f2873.js"></script>
<script src="/grapevine/3.3a4f6588.js"></script>
<script src="/grapevine/ccc49370.d86402bb.js"></script>
<script src="/grapevine/323e1239.250b9f94.js"></script>
<script src="/grapevine/0fd4395c.d054d642.js"></script>
</body>
</html>