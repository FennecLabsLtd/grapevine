<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/grapevine/blog/rss.xml" title="Grapevine Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/grapevine/blog/atom.xml" title="Grapevine Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-NY1EMEGC7C","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script><title data-react-helmet="true">Grapevine 5.0 Beta 1 | Grapevine</title><meta data-react-helmet="true" property="og:title" content="Grapevine 5.0 Beta 1 | Grapevine"><meta data-react-helmet="true" name="description" content="The second beta version of Grapevine 5.0 was uploaded to NuGet.org today, December 29, 2020. Here are some updated code samples to start playing around with."><meta data-react-helmet="true" property="og:description" content="The second beta version of Grapevine 5.0 was uploaded to NuGet.org today, December 29, 2020. Here are some updated code samples to start playing around with."><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="default"><link data-react-helmet="true" rel="shortcut icon" href="/grapevine/img/favicon.ico"><link rel="stylesheet" href="/grapevine/styles.38194a08.css">
<link rel="preload" href="/grapevine/styles.6a3593cf.js" as="script">
<link rel="preload" href="/grapevine/runtime~main.54cbbb75.js" as="script">
<link rel="preload" href="/grapevine/main.70cfa11b.js" as="script">
<link rel="preload" href="/grapevine/1.8f232afc.js" as="script">
<link rel="preload" href="/grapevine/2.1a7ff5eb.js" as="script">
<link rel="preload" href="/grapevine/3.ba1e38f5.js" as="script">
<link rel="preload" href="/grapevine/ccc49370.4e1c15a7.js" as="script">
<link rel="preload" href="/grapevine/323e1239.8f6f7d35.js" as="script">
<link rel="preload" href="/grapevine/f1925e1a.f6349821.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/grapevine/"><img src="/grapevine/img/logo.png" alt="Grapevine Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/grapevine/img/logo.png" alt="Grapevine Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Grapevine</strong></a><a class="navbar__item navbar__link" href="/grapevine/docs/">Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/grapevine/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/scottoffen/grapevine" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/grapevine/"><img src="/grapevine/img/logo.png" alt="Grapevine Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/grapevine/img/logo.png" alt="Grapevine Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Grapevine</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/grapevine/docs/">Docs</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/grapevine/blog">Blog</a></li><li class="menu__list-item"><a href="https://github.com/scottoffen/grapevine" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper blog-wrapper"><div class="container margin-vert--lg"><div class="row"><div class="col col--2"><div class="sidebar_SWld thin-scrollbar"><h3 class="sidebarItemTitle_Km2m">Recent posts</h3><ul class="sidebarItemList_3UpA"><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/grapevine/blog/three-release-candidates-and-a-website">Three Release Candidates And A Website</a></li><li class="sidebarItem_2T0D"><a aria-current="page" class="sidebarItemLink_v5H9 sidebarItemLinkActive_1anX" href="/grapevine/blog/beta-1">Grapevine 5.0 Beta 1</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/grapevine/blog/docusaurus">Grapevine Docs</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/grapevine/blog/beta-0">Grapevine 5.0 Beta 0</a></li></ul></div></div><main class="col col--8"><article><header><h1 class="margin-bottom--sm blogPostTitle_3-lP">Grapevine 5.0 Beta 1</h1><div class="margin-vert--md"><time datetime="2020-12-29T00:00:00.000Z" class="blogPostDate_Ta7i">December 29, 2020  Â· 7 min read</time></div><div class="avatar margin-vert--md"><a class="avatar__photo-link avatar__photo" href="https://scottoffen.github.io" target="_blank" rel="noreferrer noopener"><img src="https://avatars1.githubusercontent.com/u/3513626?v=4" alt="Scott Offen"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://scottoffen.github.io" target="_blank" rel="noreferrer noopener">Scott Offen</a></h4><small class="avatar__subtitle">Grapevine Creator</small></div></div></header><section class="markdown"><p>The second beta version of Grapevine 5.0 was uploaded to <a href="https://www.nuget.org/" target="_blank" rel="noopener noreferrer">NuGet.org</a> today, December 29, 2020. Here are some updated code samples to start playing around with.</p><p>For more code samples, see <a href="https://github.com/scottoffen/grapevine/tree/main/src/Samples" target="_blank" rel="noopener noreferrer">https://github.com/scottoffen/grapevine/tree/main/src/Samples</a>.</p><p>As promised, this beta drops the <code>RestServer.DeveloperConfiguration</code> that we used in the first beta, and introduces the <code>RestServerBuilder</code>. Until the documentation is complete, you can dig into the details of the class in the source code if you like. Here I&#x27;m going to show you the two static methods it exposes that I expect will be most used going forward, <code>RestServerBuilder.UseDefaults</code> and <code>RestServerBuilder.From&lt;T&gt;</code>.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>The builder instantiates and configures the <code>RestServer</code> but does not start it. You will still need to call <code>server.Start()</code> before it will respond to requests.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="using-the-default-configuration"></a>Using The Default Configuration<a class="hash-link" href="#using-the-default-configuration" title="Direct link to heading">#</a></h2><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-csharp codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">var server = RestServerBuilder.UseDefaults().Build();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>The default configuration is good for early development. It uses the <code>ServiceCollection</code> implementation from Microsoft, sets the logging level to Trace (so you can see all the output) and adds the default listener prefix of <code>https://localhost:1234</code>. You can now start that server, it will autoscan for routes, and you&#x27;ll be up and running!</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="using-a-startup-class"></a>Using A Startup Class<a class="hash-link" href="#using-a-startup-class" title="Direct link to heading">#</a></h2><p>The startup class approach allows you to specify your prefered <code>IServiceCollection</code> implementation, easily register implementations with the container, and configure your <code>IRestServer</code>, all inside of a simple class that you specify as a generic parameter.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-csharp codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">var server = RestServerBuilder.From&lt;Startup&gt;().Build();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>The class you specify must have a parameterless constructor (implict or explicit doesn&#x27;t matter). The naming of the methods in the class doesn&#x27;t matter, only their visibility (public) and method signature. Using reflection, only the first matching method will be used. If no matching methods are found, what you get will be similar to if you had used the default configuration, with the expection that <strong>no prefixes are added to the listener</strong>.</p><p>The example below provides the same outcome as if you had used the <code>UseDefaults()</code> approach.</p><div class="mdxCodeBlock_1zKU"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_2eSY">Startup.cs</div><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-csharp codeBlock_tuNs thin-scrollbar codeBlockWithTitle_1UkA"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">public class Startup</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    /*</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    * Include a method with this signature (method name does not matter) if</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    * you want to use an IServiceCollection implementation other than the one</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    * provided by Microsoft. You can choose to configure some services here</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    * as well, if you&#x27;d like.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public IServiceCollection GetServices()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        return new ServiceCollection();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    /*</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    * Include a method with this signature (method name does not matter) to</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    * configure your services. Prior to the method being called, implementations</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    * for IRestServer, IRouter and IRouteScanner have already been registered.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public void ConfigureServices(IServiceCollection services)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        services.Configure&lt;LoggerFilterOptions&gt;(options =&gt; options.MinLevel = LogLevel.Trace);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    /*</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    * Include a method with this signature (method name does not matter) to</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    * configure your IRestServer. Add event handlers for stopping and starting</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    * the server, request recieved, and before and after routing. If you want</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    * to do manual route registration (more complex) this is this place to do it.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public void ConfigureServer(IRestServer server)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        server.Prefixes.Add(&quot;http://localhost:1234/&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="specifying-a-service-collection"></a>Specifying A Service Collection<a class="hash-link" href="#specifying-a-service-collection" title="Direct link to heading">#</a></h3><p>You can use any dependency injection library you want, as long as it exposes the <code>IServiceCollection</code> interface. If the library you want to use doesn&#x27;t expose this interface, you&#x27;d have wrap it in a class that did. See the documentation for your prefered library on how to do this.</p><p>If you do specify a different implementation, you can configure your services here as well. However, between calling this method and calling the configure services method, concrete implementations for <code>IRestServer</code>, <code>IRouter</code> and <code>IRouteScanner</code> will be added. If you want to add your own implementations for that, do that in the configure services method, not here.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="configuring-services"></a>Configuring Services<a class="hash-link" href="#configuring-services" title="Direct link to heading">#</a></h3><p>This method is used to add concrete implementations for dependencies you want injected into your routes. If you want to specify your own implementations for <code>IRestServer</code>, <code>IRouter</code> and <code>IRouteScanner</code>, this would be the place to do it. Configure logging here, too. By default, a console logger has already been added, so you might want to clear all other loggers before adding your prefered implementation (e.g. NLog or Serilog).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="configuring-the-server"></a>Configuring The Server<a class="hash-link" href="#configuring-the-server" title="Direct link to heading">#</a></h3><p>By the time this method is called, a concrete implementation of <code>IRestServer</code> has been created from the service collection. The service collection created has been added to <code>IRestServer.Router.ServiceCollection</code> to be used during the route scanning and routing process. Here, you want to configure your rest server.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="pipeline-event-handlers"></a>Pipeline Event Handlers<a class="hash-link" href="#pipeline-event-handlers" title="Direct link to heading">#</a></h4><p>You can add event handlers to be executed in the following places of the pipeline:</p><ul><li><code>IRestServer.BeforeStarting</code></li><li><code>IRestServer.AfterStarting</code></li><li><code>IRestServer.BeforeStopping</code></li><li><code>IRestServer.AfterStopping</code></li><li><code>IRestServer.OnRequestAsync</code></li><li><code>IRouter.BeforeRoutingAsync</code></li><li><code>IRouter.AfterRoutingAsync</code></li></ul><p>The first four are good for logging information during server startup and shutdown, but can be used for any other purpose as well.</p><p>Use <code>BeforeRoutingAsync</code> and <code>AfterRoutingAsync</code> for things you want done before and after the request is routed, respectively.</p><p>Because any added middleware (described below) might respond to requests before the request is routed (and hence not calling <code>BeforeRoutingAsync</code> and <code>AfterRoutingAsync</code>), use <code>OnRequestAsync</code> for things you want done regardless of whether the request gets routed. Because this is the same event that middleware should connect into, you might want to add your own event handlers before adding any middleware, lest the request be responded to before the handler has a chance to execute.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="global-response-headers"></a>Global Response Headers<a class="hash-link" href="#global-response-headers" title="Direct link to heading">#</a></h4><p>You can also configure global response headers here. These are key/value pairs that you want to send back unmodified in every request.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-csharp codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">server.GlobalResponseHeaders.Add(&quot;key&quot;, &quot;value&quot;);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="custom-ihttpcontext"></a>Custom IHttpContext<a class="hash-link" href="#custom-ihttpcontext" title="Direct link to heading">#</a></h4><p>If you want to use your own implementation of <code>IHttpContext</code>, but not your own implementation of <code>IRestServer</code> (which is where the <code>IHttpContext</code> is created before being passed to the router), you can replace the default factory with your own.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-csharp codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">server.HttpContextFactory = (context, server, token) =&gt; { return new MyHttpContext(context, server, token); };</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="configure-middleware"></a>Configure Middleware<a class="hash-link" href="#configure-middleware" title="Direct link to heading">#</a></h4><p>Finally, this is also where you want to configure middleware. There are three built-in middleware components you can turn on. I&#x27;ll list them here, but for now you&#x27;ll have to check out the source code for their implementation until the documentation is up.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-csharp codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Turns on using content folders to server static content</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">server.UseContentFolders();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>In Grapevine 5, <code>IPublicFolder</code> has been replaced with <code>IContentFolder</code>. The implementation is still being worked on, but the functionality will be similar. You can add content folders to <code>IRestServer.ContentFolders</code>. The primary difference is that you will need to turn on the use of them. This can be easily done using <code>server.UseContentFolders()</code>. This change allowed for better seperation of concerns between the server and the router, and cleaned up a number of code smells from previous versions.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-csharp codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Turns on using correlation ids</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">server.UseCorrelationId();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Correlation ids are ids that are used to trace user requests between multiple microservices. You can turn this on to ensure that correlation ids from incoming requests get added to the outgoing response, and if no correlation id was on the request a new one is created. There are several overloads that allow you to specify the field the correlation id should be in and the method used to generate new correlation ids.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-csharp codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Turns on CORS</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">server.UseCorsPolicy();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>CORS was a popular request in earlier versions of Grapevine. This middleware turns on CORS based on <a href="https://github.com/sukona/Grapevine/issues/86" target="_blank" rel="noopener noreferrer">the technique described in this issue</a>. I&#x27;d like to get some feedback on how well this works, but if the defaults provided don&#x27;t work you can always create your own CORS policy and use it here via the <code>Grapevine.Middleware.ICorsPolicy</code> interface. (The location of that interface is subject to change.)</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="running-the-server"></a>Running The Server<a class="hash-link" href="#running-the-server" title="Direct link to heading">#</a></h2><p>As always, you can start the server by calling the <code>Start()</code> method. This starts the server by starting the listener and the thread that listens for incoming request, and it doesn&#x27;t block the execution thread. So, for those rare occasions that you <strong>do want to block the thread</strong>, an extension method has been added that does just that.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-csharp codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">server.Run();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>This first calls <code>Start()</code>, and then waits until the listener is no longer running before releasing the execution thread.</p></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/grapevine/blog/tags/5-0-0-beta-1">5.0.0-beta.1</a></div></footer></article><div><a href="https://github.com/scottoffen/grapevine-docs/edit/master/blog/blog/2020-12-29-beta-1.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="margin-vert--xl"><nav class="pagination-nav" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/grapevine/blog/three-release-candidates-and-a-website"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Â« Three Release Candidates And A Website</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/grapevine/blog/docusaurus"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Grapevine Docs Â»</div></a></div></nav></div></main><div class="col col--2"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#using-the-default-configuration" class="table-of-contents__link">Using The Default Configuration</a></li><li><a href="#using-a-startup-class" class="table-of-contents__link">Using A Startup Class</a><ul><li><a href="#specifying-a-service-collection" class="table-of-contents__link">Specifying A Service Collection</a></li><li><a href="#configuring-services" class="table-of-contents__link">Configuring Services</a></li><li><a href="#configuring-the-server" class="table-of-contents__link">Configuring The Server</a></li></ul></li><li><a href="#running-the-server" class="table-of-contents__link">Running The Server</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/grapevine/docs/">Style Guide</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/grapevine" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/grapevine/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/scottoffen/grapevine" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Scott Offen</div></div></div></footer></div>
<script src="/grapevine/styles.6a3593cf.js"></script>
<script src="/grapevine/runtime~main.54cbbb75.js"></script>
<script src="/grapevine/main.70cfa11b.js"></script>
<script src="/grapevine/1.8f232afc.js"></script>
<script src="/grapevine/2.1a7ff5eb.js"></script>
<script src="/grapevine/3.ba1e38f5.js"></script>
<script src="/grapevine/ccc49370.4e1c15a7.js"></script>
<script src="/grapevine/323e1239.8f6f7d35.js"></script>
<script src="/grapevine/f1925e1a.f6349821.js"></script>
</body>
</html>