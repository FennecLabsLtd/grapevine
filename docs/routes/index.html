<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/grapevine/blog/rss.xml" title="Grapevine Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/grapevine/blog/atom.xml" title="Grapevine Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-NY1EMEGC7C","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script><title data-react-helmet="true">Routes | Grapevine</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Routes | Grapevine"><meta data-react-helmet="true" name="description" content="A route (IRoute) represents the code you want to run and the conditions under which you want it to be run. Any method or function you want to execute must be asynchronous (returns a Task) and take a single parameter of type IHttpContext."><meta data-react-helmet="true" property="og:description" content="A route (IRoute) represents the code you want to run and the conditions under which you want it to be run. Any method or function you want to execute must be asynchronous (returns a Task) and take a single parameter of type IHttpContext."><meta data-react-helmet="true" property="og:url" content="https://scottoffen.github.io/grapevine/grapevine/docs/routes"><link data-react-helmet="true" rel="shortcut icon" href="/grapevine/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://scottoffen.github.io/grapevine/grapevine/docs/routes"><link rel="stylesheet" href="/grapevine/styles.38194a08.css">
<link rel="preload" href="/grapevine/styles.1180921a.js" as="script">
<link rel="preload" href="/grapevine/runtime~main.e1d01335.js" as="script">
<link rel="preload" href="/grapevine/main.56ec508e.js" as="script">
<link rel="preload" href="/grapevine/1.d335f5bb.js" as="script">
<link rel="preload" href="/grapevine/2.fa186d54.js" as="script">
<link rel="preload" href="/grapevine/54.3888ab31.js" as="script">
<link rel="preload" href="/grapevine/55.b7afef64.js" as="script">
<link rel="preload" href="/grapevine/f976f453.02f1e372.js" as="script">
<link rel="preload" href="/grapevine/17896441.c0ed6dbd.js" as="script">
<link rel="preload" href="/grapevine/c6b0d112.a9b13611.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/grapevine/"><img src="/grapevine/img/logo.png" alt="Grapevine Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/grapevine/img/logo.png" alt="Grapevine Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Grapevine</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/grapevine/docs/">Docs</a><a class="navbar__item navbar__link" href="/grapevine/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/scottoffen/grapevine" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/grapevine/"><img src="/grapevine/img/logo.png" alt="Grapevine Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/grapevine/img/logo.png" alt="Grapevine Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Grapevine</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/grapevine/docs/">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/grapevine/blog">Blog</a></li><li class="menu__list-item"><a href="https://github.com/scottoffen/grapevine" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Grapevine</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/grapevine/docs/">Server Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/grapevine/docs/startup">Bulding The Rest Server</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/grapevine/docs/routes">Routes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/grapevine/docs/route-scanner">Route Scanner</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/grapevine/docs/router">Router and Routing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/grapevine/docs/content-folders">Content Folders</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/grapevine/docs/rest-server">Rest Server</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/grapevine/docs/http-context">Http Context</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/grapevine/docs/locals">Using Locals</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/grapevine/docs/middleware">Built In Middleware</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/grapevine/docs/config-and-start">Configuration and Startup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/grapevine/docs/http-status-codes">Http Status Codes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/grapevine/docs/http-methods">Http Methods</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/grapevine/docs/content-types-encoding">Content Types and Encoding</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/grapevine/docs/advanced-access">Direct Access via Advanced</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Grapevine Client</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/grapevine/docs/client-overview">Client Overview</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Tutorials</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/grapevine/docs/tutorials/">FAQs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/grapevine/docs/tutorials/send-response">Sending Responses</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/grapevine/docs/tutorials/add-middleware">Adding Middleware</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/grapevine/docs/tutorials/parsing-multipart-form-data">Multipart Form Data</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/grapevine/docs/tutorials/using-jwt">Using JWT</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/grapevine/docs/tutorials/using-https-ssl">Using HTTPS and SSL</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/grapevine/docs/tutorials/extending-grapevine">Extending Grapevine</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/grapevine/docs/tutorials/windows-authentication">Windows Authentication</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/grapevine/docs/tutorials/configure-namespace-reservation">Configure Namespace Reservation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/grapevine/docs/tutorials/windows-firewall">Windows Firewall</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Style Guide</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/grapevine/docs/style-guide">Style Guide</a></li></ul></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">Routes</h1></header><div class="markdown"><p>A route (<code>IRoute</code>) represents the code you want to run and the conditions under which you want it to be run. Any method or function you want to execute must be asynchronous (returns a <code>Task</code>) and take a single parameter of type <a href="/grapevine/docs/http-context"><code>IHttpContext</code></a>.</p><p>A route requires three things:</p><ol><li>The code to execute</li><li>The the HTTP method (<a href="/grapevine/docs/http-methods"><code>HttpMethod</code></a>)</li><li>A route template</li></ol><p>If the method is omitted, the route is assigned the default method <code>HttpMethod.Any</code>, which, as the name suggests, will match any HTTP method.</p><p>If the route template is omitted, the route is assigned a default template that will match for any endpoint and no endpoint.</p><p>Omitting both the method or the route template when creating a route will result in the creation of a catch-all route, which may or may not be desireable.</p><p>The router will pass the <code>IHttpContext</code> to the method <code>IRoute.Matches(IHttpContext context)</code> to determine if the route should be executed or not. If the HTTP method on the request matches and the endpoint matches the route template (as well as any header matches that are defined), the method will be executed.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="creating-a-route-from-a-lambda"></a>Creating A Route From A Lambda<a class="hash-link" href="#creating-a-route-from-a-lambda" title="Direct link to heading">#</a></h2><p>You can create a route from a lambda expression:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-csharp codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">var route = new Route(async (context) =&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    await context.Response.SendResponseAsync(&quot;route from lambda expression&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}, &quot;Get&quot;, &quot;/lambda&quot;));</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="creating-a-route-from-a-function"></a>Creating A Route From A Function<a class="hash-link" href="#creating-a-route-from-a-function" title="Direct link to heading">#</a></h2><p>You can generate a route using a <code>Func&lt;IHttpContext, Task&gt;</code>:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-csharp codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Func&lt;IHttpContext, Task&gt; callback = async (context) =&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    await context.Response.SendResponseAsync(&quot;route from func&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var route = new Route(callback, &quot;Get&quot;, &quot;/function&quot;);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="creating-a-route-from-a-method"></a>Creating A Route From A Method<a class="hash-link" href="#creating-a-route-from-a-method" title="Direct link to heading">#</a></h2><p>Routes can be generated from both static and instance methods. Instance methods must be on a class that can be instantiated.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="instance-method"></a>Instance Method<a class="hash-link" href="#instance-method" title="Direct link to heading">#</a></h3><p>When using an instance method, we will generate a route with a generic parameter.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-csharp codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">public class TestResource</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public async Task TestRoute(IHttpContext context)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        await context.Response.SendResponseAsync(&quot;route from method&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var methodInfo = typeof(TestResource).GetMethod(&quot;TestRoute&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var route = new Route&lt;TestResource&gt;(methodInfo, &quot;Get&quot;, &quot;/instance-method&quot;);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>Best practice is to use the <a href="/grapevine/docs/route-scanner">Route Scanner</a> to generate routes from methods in classes.</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="static-method"></a>Static Method<a class="hash-link" href="#static-method" title="Direct link to heading">#</a></h3><p>When generating a route from a static method, you assign the static method like you would a delegate.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-csharp codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">public static class StaticTestResource</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public static async Task StaticTestRoute(IHttpContext context)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        await context.Response.SendResponseAsync(&quot;route from static method&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var route = new Route(StaticTestResource.StaticTestRoute, &quot;Get&quot;, &quot;/static-method&quot;);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="specifying-an-http-method"></a>Specifying An Http Method<a class="hash-link" href="#specifying-an-http-method" title="Direct link to heading">#</a></h2><p>The <a href="/grapevine/docs/http-methods"><code>HttpMethod</code></a> helper class can be used to specify the method for matching routes. It contains a number of static properties that ensure consistency.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-csharp codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">var route = new Route(callback, HttpMethod.Get, &quot;/some/path&quot;);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>In order to avoid ambiguity between <code>Grapevine.HttpMethod</code> and <code>System.Net.Http.HttpMethod</code>, you can also use a string to specify the method. It will be implicity converted to an instance of <code>HttpMethod</code>.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-csharp codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">var route = new Route(callback, &quot;Get&quot;, &quot;/some/path&quot;);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="specifying-a-route-template"></a>Specifying A Route Template<a class="hash-link" href="#specifying-a-route-template" title="Direct link to heading">#</a></h2><p>A route template is generated from a string that defines the pattern. This pattern can be a literal string, a regular expression string, or a parameterized string. Literal and parameterized strings are case insensative matches. Regular expression strings are only case insensative if defined in the regular expression.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="using-literal-strings"></a>Using Literal Strings<a class="hash-link" href="#using-literal-strings" title="Direct link to heading">#</a></h3><p>This is the most straight forward approach. In the example below, this route will execute when the endpoint is <code>/some/path</code>.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-csharp codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">var route = new Route(callback, &quot;Any&quot;, &quot;/some/path&quot;);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="using-regular-expressions"></a>Using Regular Expressions<a class="hash-link" href="#using-regular-expressions" title="Direct link to heading">#</a></h3><p>You can express the route template as a regular expression string or as a <code>Regex</code> instance. The <code>Route</code> constructor will treat the route template string as a regular expression if it begins with a caret (<code>^</code>).</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-csharp codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">var expr = @&quot;^/users/(\d{3,5})&quot;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var route1 = new Route(callback, &quot;Any&quot;, expr);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var route2 = new Route(callback, &quot;Any&quot;, new Regex(expr));</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="using-parameterized-strings"></a>Using Parameterized Strings<a class="hash-link" href="#using-parameterized-strings" title="Direct link to heading">#</a></h3><p>You can put route parameters in the route template by enclosing them within <code>{}</code> curly braces.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-csharp codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">var route = new Route(callback, &quot;Any&quot;, &quot;/users/{id}&quot;);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>In the above example, the route would respond to calls made to all of <code>/users/1234</code>, <code>/users/rudy</code> and <code>/users/1a2b3c</code>, but not to <code>/users</code> or <code>/users/1234/rudy</code>.</p><p>Route templates may contain more that one route parameter, and you can have more than one route parameter in a route segment, however route parameters <strong>must</strong> be separated by a literal value and <strong>must</strong> have a name unique to the route template. Literal text other than the route parameter and path separator must match the text in the URL.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-csharp codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// This will not fail, but it will cause unexpected behavior because</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// there is no literal value between route parameters.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var route = new Route(callback, &quot;Any&quot;, &quot;/{resource}{id}&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// This will cause a runtime exception because route parameter</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// names are not unique to the template.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var route = new Route(callback, &quot;Any&quot;, &quot;/{id}/{id}&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// This will work just fine.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var route = new Route(callback, &quot;Any&quot;, &quot;/{resource}/{id}&quot;);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>If you need to match a literal route parameter delimiter <code>{</code> or <code>}</code> in your route template, it is recommended that you use a regular expression.</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="route-parameter-constraints"></a>Route Parameter Constraints<a class="hash-link" href="#route-parameter-constraints" title="Direct link to heading">#</a></h3><p>Route parameters may have constraints that must match the route value bound from the URL. Adding <code>:</code> and constraint name after the route parameter name specifies an inline constraint on a route parameter. If the constraint requires arguments, they&#x27;re enclosed in parentheses <code>(...)</code> after the constraint name.</p><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>Route constraints are not intended to be used for input validation, but to disabmiguate between similar routes. If constraints are used for input validation, invalid input results in a 404 Not Found response, when it should instead produce a 400 Bad Request response.</p></div></div><p>The following table lists the built-in route constraints and their behavior. All inline constraints can have an additional length constraint added to it by appending another <code>:</code> and the length constraint name (<code>minlength</code>, <code>maxlength</code> and <code>length</code>).</p><table><thead><tr><th>constraint</th><th>Example</th><th>Example Matches</th><th>Notes</th></tr></thead><tbody><tr><td><code>alpha</code></td><td><code>{greeting:alpha}</code></td><td><code>hello</code></td><td>All uppercase and lower case letters.</td></tr><tr><td><code>alphanum</code></td><td><code>{err-code:alphanum}</code></td><td><code>Z1152a</code></td><td>All letters, numbers and the underscore <code>_</code>.</td></tr><tr><td><code>guid</code></td><td><code>{id:guid}</code></td><td><code>14c412f0-bf7e-41c0-a6a1-d6165079ec8d</code></td><td>Matches guids with and without dashes, as well as with or without enclosing <code>{</code> <code>}</code> or <code>(</code> <code>)</code>.</td></tr><tr><td><code>num</code></td><td><code>{id:num}</code></td><td><code>1234</code>, <code>90210</code></td><td>An unlimited number of digits</td></tr><tr><td><code>string</code></td><td><code>{type:string}</code></td><td><code>Gr@p3v1ne~</code></td><td>An unlimited length of any text that isn&#x27;t the route segement seperator <code>/</code>. This is the default constraint applied if none is specified when using the length constraints, or if the constraint specified is not otherwise found.</td></tr><tr><td><code>minlength(n)</code></td><td><code>{name:minlength(5)}</code></td><td><code>Samantha</code></td><td>String must be at least <code>n</code> characters in length.</td></tr><tr><td><code>maxlength(n)</code></td><td><code>{name:maxlength(20)}</code></td><td><code>Samantha</code></td><td>String must be no more than <code>n</code> characters in length.</td></tr><tr><td><code>length(n)</code></td><td><code>{state:length(2)}</code></td><td><code>NE</code>, <code>OH</code></td><td>String must be exactly <code>n</code> characters in length.</td></tr><tr><td><code>length(m,n)</code></td><td><code>{name:length(5,20)}</code></td><td><code>Samantha</code></td><td>String must be between <code>m</code> and <code>n</code> characters in length.</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="accessing-route-parameter-values"></a>Accessing Route Parameter Values<a class="hash-link" href="#accessing-route-parameter-values" title="Direct link to heading">#</a></h2><p>Route parameter values are accessed via keys on the <code>IHttpRequest.PathParameters</code> property. All values are strings that will need to be cast to other types as required.</p><ul><li>If your route template was a literal string, there will not be any key/value pairs</li><li>If your route template was a regular expression string, the key for each capture groups will be the string <code>p-</code> followed by the number of the capture group, e.g. <code>p-0</code>, <code>p-1</code>, etc.</li><li>If your route template was a parameterized string, the the key will be the name you used for the parameter.</li></ul><p>You can add keys to route templates that were generated from regular expressions by adding them, in order, to the <code>IRoute.RouteTemplate.PatternKeys</code> list.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="limit-route-matching-using-headers"></a>Limit Route Matching Using Headers<a class="hash-link" href="#limit-route-matching-using-headers" title="Direct link to heading">#</a></h2><p>You can also further limit whether a route is matched to a request based on the value of any header. The method call takes the header key as a string and a regular expression to match the value. Only one regular expression can be defined per header value.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-csharp codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">var route = new Route(callback, &quot;Get&quot;, &quot;/some/path&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .WithHeader(&quot;Host&quot;, new Regex(@&quot;^localhost:1234$&quot;));</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>This method is chainable, so you can add as many header conditions as needed.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="enable-and-disable-routes"></a>Enable And Disable Routes<a class="hash-link" href="#enable-and-disable-routes" title="Direct link to heading">#</a></h2><p>Routes can be enabled and disabled. Only enabled routes will be matched by the router, and only enabled routes will be invoked.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-csharp codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">var route = new Route(callback, &quot;Get&quot;, &quot;/some/path&quot;, false)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .Enable()   // extension method</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .Disable(); // extension method</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Direct property access</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">route.Enabled = true</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="route-name-and-description"></a>Route Name and Description<a class="hash-link" href="#route-name-and-description" title="Direct link to heading">#</a></h2><p>The <code>Name</code> and <code>Description</code> properties are primarily used in output when debugging and logging. You can change them at any time. You can also use the <code>Name</code> property to retrieve a route from the routing table on the router. While uniquness is not required, it would be helpful in this last case if your route names are unique.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-csharp codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">var route = server.Router.RoutingTable</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .Where(r =&gt; r.Name == &quot;Some Unique Name&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .FirstOrDefault();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/scottoffen/grapevine-docs/edit/master/docs/gv-routes.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/grapevine/docs/startup"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Building The Rest Server</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/grapevine/docs/route-scanner"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Route Scanner Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#creating-a-route-from-a-lambda" class="table-of-contents__link">Creating A Route From A Lambda</a></li><li><a href="#creating-a-route-from-a-function" class="table-of-contents__link">Creating A Route From A Function</a></li><li><a href="#creating-a-route-from-a-method" class="table-of-contents__link">Creating A Route From A Method</a><ul><li><a href="#instance-method" class="table-of-contents__link">Instance Method</a></li><li><a href="#static-method" class="table-of-contents__link">Static Method</a></li></ul></li><li><a href="#specifying-an-http-method" class="table-of-contents__link">Specifying An Http Method</a></li><li><a href="#specifying-a-route-template" class="table-of-contents__link">Specifying A Route Template</a><ul><li><a href="#using-literal-strings" class="table-of-contents__link">Using Literal Strings</a></li><li><a href="#using-regular-expressions" class="table-of-contents__link">Using Regular Expressions</a></li><li><a href="#using-parameterized-strings" class="table-of-contents__link">Using Parameterized Strings</a></li><li><a href="#route-parameter-constraints" class="table-of-contents__link">Route Parameter Constraints</a></li></ul></li><li><a href="#accessing-route-parameter-values" class="table-of-contents__link">Accessing Route Parameter Values</a></li><li><a href="#limit-route-matching-using-headers" class="table-of-contents__link">Limit Route Matching Using Headers</a></li><li><a href="#enable-and-disable-routes" class="table-of-contents__link">Enable And Disable Routes</a></li><li><a href="#route-name-and-description" class="table-of-contents__link">Route Name and Description</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/grapevine/docs/">Overview</a></li><li class="footer__item"><a class="footer__link-item" href="/grapevine/docs/tutorials/">Tutorials</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/grapevine" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://github.com/scottoffen/grapevine/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Discussions</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/grapevine/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/scottoffen/grapevine" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Scott Offen</div></div></div></footer></div>
<script src="/grapevine/styles.1180921a.js"></script>
<script src="/grapevine/runtime~main.e1d01335.js"></script>
<script src="/grapevine/main.56ec508e.js"></script>
<script src="/grapevine/1.d335f5bb.js"></script>
<script src="/grapevine/2.fa186d54.js"></script>
<script src="/grapevine/54.3888ab31.js"></script>
<script src="/grapevine/55.b7afef64.js"></script>
<script src="/grapevine/f976f453.02f1e372.js"></script>
<script src="/grapevine/17896441.c0ed6dbd.js"></script>
<script src="/grapevine/c6b0d112.a9b13611.js"></script>
</body>
</html>